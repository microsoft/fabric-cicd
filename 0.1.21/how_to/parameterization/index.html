<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://microsoft.github.io/fabric-cicd/0.1.21/how_to/parameterization/ rel=canonical><link href=../item_types/ rel=prev><link href=../optional_feature/ rel=next><link rel=icon href=../../config/assets/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.5"><title>Parameterization - fabric-cicd</title><link rel=stylesheet href=../../assets/stylesheets/main.8608ea7d.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../config/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=fabric data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#parameterization class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> <p style="text-align: center;">⚠️ This library is in Public Preview. Please raise issues & feature requests as they arise.</p> </div> <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script> </aside> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=fabric-cicd class="md-header__button md-logo" aria-label=fabric-cicd data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> fabric-cicd </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Parameterization </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/microsoft/fabric-cicd title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> microsoft/fabric-cicd </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> How To </a> </li> <li class=md-tabs__item> <a href=../../example/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../../code_reference/ class=md-tabs__link> Code Reference </a> </li> <li class=md-tabs__item> <a href=../../contribution/ class=md-tabs__link> Contribution </a> </li> <li class=md-tabs__item> <a href=../../changelog/ class=md-tabs__link> Changelog </a> </li> <li class=md-tabs__item> <a href=../../about/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=fabric-cicd class="md-nav__button md-logo" aria-label=fabric-cicd data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg> </a> fabric-cicd </label> <div class=md-nav__source> <a href=https://github.com/microsoft/fabric-cicd title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> microsoft/fabric-cicd </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> How To </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> How To </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../getting_started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../item_types/ class=md-nav__link> <span class=md-ellipsis> Item Types </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Parameterization </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Parameterization </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#inputs class=md-nav__link> <span class=md-ellipsis> Inputs </span> </a> <nav class=md-nav aria-label=Inputs> <ul class=md-nav__list> <li class=md-nav__item> <a href=#find_replace class=md-nav__link> <span class=md-ellipsis> find_replace </span> </a> </li> <li class=md-nav__item> <a href=#key_value_replace class=md-nav__link> <span class=md-ellipsis> key_value_replace </span> </a> </li> <li class=md-nav__item> <a href=#spark_pool class=md-nav__link> <span class=md-ellipsis> spark_pool </span> </a> </li> <li class=md-nav__item> <a href=#optional-fields class=md-nav__link> <span class=md-ellipsis> Optional Fields </span> </a> </li> <li class=md-nav__item> <a href=#parameter-file-validation class=md-nav__link> <span class=md-ellipsis> Parameter File Validation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#sample-file class=md-nav__link> <span class=md-ellipsis> Sample File </span> </a> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> <nav class=md-nav aria-label=Examples> <ul class=md-nav__list> <li class=md-nav__item> <a href=#notebooks class=md-nav__link> <span class=md-ellipsis> Notebooks </span> </a> </li> <li class=md-nav__item> <a href=#data-pipelines class=md-nav__link> <span class=md-ellipsis> Data Pipelines </span> </a> </li> <li class=md-nav__item> <a href=#environments class=md-nav__link> <span class=md-ellipsis> Environments </span> </a> </li> <li class=md-nav__item> <a href=#dataflows class=md-nav__link> <span class=md-ellipsis> Dataflows </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../optional_feature/ class=md-nav__link> <span class=md-ellipsis> Optional Features </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../example/ class="md-nav__link "> <span class=md-ellipsis> Examples </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../example/authentication/ class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../example/deployment_variable/ class=md-nav__link> <span class=md-ellipsis> Deployment Variables </span> </a> </li> <li class=md-nav__item> <a href=../../example/release_pipeline/ class=md-nav__link> <span class=md-ellipsis> Release Pipelines </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../code_reference/ class=md-nav__link> <span class=md-ellipsis> Code Reference </span> </a> </li> <li class=md-nav__item> <a href=../../contribution/ class=md-nav__link> <span class=md-ellipsis> Contribution </span> </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=parameterization>Parameterization<a class=headerlink href=#parameterization title="Permanent link">&para;</a></h1> <p>To handle environment-specific values committed to git, use a <code>parameter.yml</code> file. This file supports programmatically changing values based on the <code>environment</code> field passed into the <code>FabricWorkspace</code> object. If the environment value is not found in the <code>parameter.yml</code> file, any dependent replacements will be skipped. This file should sit in the root of the <code>repository_directory</code> folder specified in the FabricWorkspace object.</p> <p><strong>Important Notice:</strong> The <code>parameter.yml</code> file structure has been recently updated. Please refer to the documentation below for important changes.</p> <p>Example of parameter.yml location based on provided repository directory:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>from</span><span class=w> </span><span class=nn>fabric_cicd</span><span class=w> </span><span class=kn>import</span> <span class=n>FabricWorkspace</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=n>workspace</span> <span class=o>=</span> <span class=n>FabricWorkspace</span><span class=p>(</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>workspace_id</span><span class=o>=</span><span class=s2>&quot;your-workspace-id&quot;</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>    <span class=n>repository_directory</span><span class=o>=</span><span class=s2>&quot;C:/dev/workspace&quot;</span><span class=p>,</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>item_type_in_scope</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;Notebook&quot;</span><span class=p>]</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=p>)</span>
</span></code></pre></div> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>C:/dev/workspace
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    /HelloWorld.Notebook
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>        ...
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>    /GoodbyeWorld.Notebook
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>        ...
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>    /parameter.yml
</span></code></pre></div> <p>Raise a <a href="https://github.com/microsoft/fabric-cicd/issues/new?template=2-feature.yml">feature request</a> for additional parameterization capabilities.</p> <h2 id=inputs>Inputs<a class=headerlink href=#inputs title="Permanent link">&para;</a></h2> <h3 id=find_replace><code>find_replace</code><a class=headerlink href=#find_replace title="Permanent link">&para;</a></h3> <p>For generic find-and-replace operations. This will replace every instance of a specified string in every file. Specify the <code>find_value</code> and the <code>replace_value</code> for each environment (e.g., PPE, PROD). Optional fields, including <code>item_type</code>, <code>item_name</code>, and <code>file_path</code>, can be used as file filters for more fine-grained control over where the replacement occurs. The <code>is_regex</code> field can be added and set to <code>"true"</code> to enable regex pattern matching for the <code>find_value</code>.</p> <p>Note: A common use case for this function is to replace values in text based file types like notebooks.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>find_replace</span><span class=p>:</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>    </span><span class=c1># Required fields: value must be a string</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;find-this-value&gt;</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>          </span><span class=nt>&lt;environment-1-key&gt;</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;replace-with-this-value&gt;</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>          </span><span class=nt>&lt;environment-2-key&gt;</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;replace-with-this-value&gt;</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>      </span><span class=c1># Optional fields</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>      </span><span class=c1># Set to &quot;true&quot; to treat find_value as a regex pattern</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>      </span><span class=nt>is_regex</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&lt;true|True&gt;&quot;</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>      </span><span class=c1># Filter values must be a string or array of strings</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>      </span><span class=nt>item_type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;item-type-filter-value&gt;</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;item-name-filter-value&gt;</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>      </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;file-path-filter-value&gt;</span>
</span></code></pre></div> <p><span class=md-h4-nonanchor>Dynamic Replacement</span></p> <p>The <code>replace_value</code> field supports variables that reference workspace or deployed item metadata:</p> <ul> <li><strong><code>$workspace.id</code></strong>: Replace value is the workspace ID of the target environment.</li> <li><strong><code>$items.type.name.attribute</code></strong>: Replace value is an attribute of a deployed item.</li> <li><strong>Format</strong>: Item type and name are <strong>case-sensitive</strong>. Enter the item name exactly as it appears, including spaces. For example: <code>$items.Notebook.Hello World.id</code></li> <li><strong>Supported attributes</strong>: <code>id</code> (item ID) and <code>sqlendpoint</code>. Attributes should be lowercase.</li> <li><strong>Important</strong>: If the specified item type or name does not exist in the deployed workspace, or if an invalid attribute is provided, or if the attribute value does not exist, the deployment will fail.</li> <li>For an in-depth example, see the <strong>notebook example</strong> alternate approach.</li> </ul> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nt>find_replace</span><span class=p>:</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;db52be81-c2b2-4261-84fa-840c67f4bbd0&quot;</span><span class=w> </span><span class=c1># Lakehouse GUID</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Sample_LH.id&quot;</span><span class=w> </span><span class=c1># PPE Sample_LH Lakehouse GUID</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Sample_LH.id&quot;</span><span class=w> </span><span class=c1># PROD Sample_LH Lakehouse GUID</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;123e4567-e89b-12d3-a456-426614174000&quot;</span><span class=w> </span><span class=c1># Workspace ID</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$workspace.id&quot;</span><span class=w> </span><span class=c1># PPE workspace ID</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$workspace.id&quot;</span><span class=w> </span><span class=c1># PROD workspace ID</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;serverconnectionstringexample.com&quot;</span><span class=w> </span><span class=c1># SQL endpoint connection string</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Sample_LH.sqlendpoint&quot;</span><span class=w> </span><span class=c1># PPE Sample_LH Lakehouse sql endpoint</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Sample_LH.sqlendpoint&quot;</span><span class=w> </span><span class=c1># PROD Sample_LH Lakehouse sql endpoint</span>
</span></code></pre></div> <p><span class=md-h4-nonanchor>Environment Variable Replacement</span></p> <p>If the <code>enable_environment_variable_replacement</code> feature flag is set, pipeline/environment variables will be used to replace the values in the parameter.yml file with the corresponding values from the variables dictionary, see example below: <strong>Only Environment Variable beginning with '$ENV:' will be used as replacement values.</strong></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nt>find_replace</span><span class=p>:</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=c1># Lakehouse GUID</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;db52be81-c2b2-4261-84fa-840c67f4bbd0&quot;</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$ENV:ppe_lakehouse&quot;</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$ENV:prod_lakehouse&quot;</span>
</span></code></pre></div> <h3 id=key_value_replace><code>key_value_replace</code><a class=headerlink href=#key_value_replace title="Permanent link">&para;</a></h3> <p>Provides the ability to perform key based replacement operations in JSON and YAML files. This will look for a specific key using a valid JSONPath expression and replace every found instance in every file. Specify the <code>find_value</code> and the <code>replace_value</code> for each environment (e.g., PPE, PROD). Optional fields, including <code>item_type</code>, <code>item_name</code>, and <code>file_path</code>, can be used as file filters for more fine-grained control over where the replacement occurs. Refer to https://jsonpath.com/ for a simple to use JSONPath evaluator.</p> <p>Note: A common use case for this function is to replace values in key/value file types like Pipelines, Platform files, etc. e.g., find and replace a connection GUID referenced in a data pipeline.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>key_value_replace</span><span class=p>:</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>    </span><span class=c1># Required fields: key must be JSONPath</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;find-this-key&gt;</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>          </span><span class=nt>&lt;environment-1-key&gt;</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;replace-with-this-value&gt;</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>          </span><span class=nt>&lt;environment-2-key&gt;</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;replace-with-this-value&gt;</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>      </span><span class=c1># Optional fields: value must be a string or array of strings</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>      </span><span class=nt>item_type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;item-type-filter-value&gt;</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;item-name-filter-value&gt;</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>      </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;file-path-filter-value&gt;</span>
</span></code></pre></div> <h3 id=spark_pool><code>spark_pool</code><a class=headerlink href=#spark_pool title="Permanent link">&para;</a></h3> <p>Environments attached to custom spark pools need to be parameterized because the <code>instance_pool_id</code> in the <code>Sparkcompute.yml</code> file isn't supported in the create/update environment APIs. Provide the <code>instance_pool_id</code> value, and the pool <code>type</code> and <code>name</code> values as the <code>replace_value</code> for each environment (e.g., PPE, PROD). An optional field, <code>item_name</code>, can be used to filter the specific environment item where the replacement will occur.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>spark_pool</span><span class=p>:</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=c1># Required fields: value must be a string</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>instance_pool_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;instance-pool-id-value&gt;</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>          </span><span class=nt>&lt;environment-1-key&gt;</span><span class=p>:</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>              </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;Capacity-or-Workspace&gt;</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;pool-name&gt;</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>          </span><span class=nt>&lt;environment-2-key&gt;</span><span class=p>:</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=w>              </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;Capacity-or-Workspace&gt;</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;pool-name&gt;</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=w>      </span><span class=c1># Optional field: value must be a string or array of strings</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;item-name-filter-value&gt;</span>
</span></code></pre></div> <h3 id=optional-fields>Optional Fields<a class=headerlink href=#optional-fields title="Permanent link">&para;</a></h3> <ul> <li>General parameterization functionality is unaffected when optional fields are omitted or left empty.</li> <li>String values should be wrapped in quotes (make sure to escape characters, such as <strong>\</strong> in <code>file_path</code> inputs).</li> </ul> <p><span class=md-h4-nonanchor>is_regex</span></p> <ul> <li>The <code>is_regex</code> field must be set to the <strong>string</strong> <code>"true"</code> to enable regex pattern matching (not case-sensitive, <code>"True"</code> is also accepted).</li> <li>When <code>is_regex</code> is present and properly set, the <code>find_value</code> will be interpreted as a regex pattern. Otherwise, it's interpreted as a literal string.</li> <li>Ensure that all special characters in the regex pattern are properly <strong>escaped</strong>.</li> <li><strong>Important</strong>: The user is solely <strong>responsible for providing a valid and correctly matching regex pattern</strong>. If the pattern is invalid (i.e., it cannot be compiled) or fails to match any content in the target files, the deployment will fail.</li> <li><strong>Important</strong>: When using a regex <code>find_value</code>, enclose only the exact value you want to replace in parentheses <code>( )</code>. This creates <strong>capture group 1</strong>, which must always be used as the replacement target. Be sure to include the <strong>surrounding context</strong> such as property names, quotes, etc. in the pattern to ensure it matches the correct value and not a value with a similar format elsewhere in the file. Capture group 1 should isolate values like a GUID, SQL connection string, etc. Once a match is found, the <code>find_value</code> is assigned to the matched string and can be used to replace all occurrences of that value in the file. <strong>For example</strong>, if you're using a regex <code>find_value</code> to match a lakehouse ID attached to a notebook, avoid writing a pattern that matches only the GUID format. Doing so would risk replacing any matching GUID in the file, not just the intended one. Instead, include the surrounding context in your pattern—such as <code># META "default_lakehouse": "123456"</code>—and capture only the <code>123456</code> GUID in group 1. This ensures that only the correct, context-specific GUID is replaced.</li> </ul> <p><span class=md-h4-nonanchor>File Filters</span></p> <ul> <li>Optional filter values that <em>are</em> provided must match the corresponding properties in the repository file in order for the replacement to occur in the given file. If at least one filter value does not match, the replacement will be skipped for that file.</li> <li>If none of the optional filter fields or values are provided, the value found in <em>any</em> repository file is subject to replacement.</li> <li>Input values are <strong>case sensitive</strong>.</li> <li>Input values must be <strong>string</strong> or <strong>array</strong> (enables one or many values to filter on).</li> <li>YAML supports array inputs using bracket ( <strong>[ ]</strong> ) or dash ( <strong>-</strong> ) notation.</li> <li>Item types must be valid; see valid <a href="https://learn.microsoft.com/en-us/rest/api/fabric/core/items/create-item?tabs=HTTP#itemtype">types</a>.</li> <li><code>file_path</code> accepts absolute or relative paths. Relative paths must be relative to the <em>repository directory</em>.</li> </ul> <h3 id=parameter-file-validation>Parameter File Validation<a class=headerlink href=#parameter-file-validation title="Permanent link">&para;</a></h3> <p>Validation of the <code>parameter.yml</code> file is a built-in feature of fabric-cicd, managed by the <code>Parameter</code> class. Validation is utilized in the following scenarios:</p> <p><strong>Debuggability:</strong> Users can debug and validate their parameter file to ensure it meets the acceptable structure and input value requirements before running a deployment. Simply run the <code>debug_parameterization.py</code> script located in the <code>devtools</code> directory.</p> <p><strong>Deployment:</strong> At the start of a deployment, an automated validation checks the validity of the <code>parameter.yml</code> file, if it is present. This step ensures that valid parameters are loaded, allowing deployment to run smoothly with correctly applied parameterized configurations. If the parameter file is invalid, the deployment will not proceed.</p> <h2 id=sample-file>Sample File<a class=headerlink href=#sample-file title="Permanent link">&para;</a></h2> <p>An exhaustive example of all capabilities currently supported in the <code>parameter.yml</code> file.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nt>find_replace</span><span class=p>:</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;123e4567-e89b-12d3-a456-426614174000&quot;</span><span class=w> </span><span class=c1># lakehouse GUID to be replaced</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;f47ac10b-58cc-4372-a567-0e02b2c3d479&quot;</span><span class=w> </span><span class=c1># PPE lakehouse GUID</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;9b2e5f4c-8d3a-4f1b-9c3e-2d5b6e4a7f8c&quot;</span><span class=w> </span><span class=c1># PROD lakehouse GUID</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>      </span><span class=nt>item_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Notebook&quot;</span><span class=w> </span><span class=c1># filter on notebook files</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;Hello</span><span class=nv> </span><span class=s>World&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;Goodbye</span><span class=nv> </span><span class=s>World&quot;</span><span class="p p-Indicator">]</span><span class=w> </span><span class=c1># filter on specific notebook files</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;8f5c0cec-a8ea-48cd-9da4-871dc2642f4c&quot;</span><span class=w> </span><span class=c1># workspace ID to be replaced</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$ENV:ppe_workspace_id&quot;</span><span class=w> </span><span class=c1># enable_environment_variable_replacement feature flag</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$ENV:prod_workspace_id&quot;</span><span class=w> </span><span class=c1># enable_environment_variable_replacement feature flag</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=w>      </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class=c1># filter on notebook files with these paths</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;/Hello</span><span class=nv> </span><span class=s>World.Notebook/notebook-content.py&quot;</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;\\Goodbye</span><span class=nv> </span><span class=s>World.Notebook\\notebook-content.py&quot;</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=w>    </span><span class=c1># lakehouse GUID to be replaced (using regex pattern)</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">\#\s*META\s+&quot;default_lakehouse&quot;:\s*&quot;([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})&quot;</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Example_LH.id&quot;</span><span class=w> </span><span class=c1># PPE lakehouse GUID (dynamic)</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Example_LH.id&quot;</span><span class=w> </span><span class=c1># PROD lakehouse GUID (dynamic)</span>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a><span class=w>      </span><span class=nt>is_regex</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a><span class=w>      </span><span class=nt>item_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Notebook&quot;</span><span class=w> </span><span class=c1># filter on notebook files</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;Hello</span><span class=nv> </span><span class=s>World&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;Goodbye</span><span class=nv> </span><span class=s>World&quot;</span><span class="p p-Indicator">]</span><span class=w> </span><span class=c1># filter on specific notebook files</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a><span class=w>    </span><span class=c1># lakehouse workspace ID to be replaced (using regex pattern)</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">\#\s*META\s+&quot;default_lakehouse_workspace_id&quot;:\s*&quot;([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})&quot;</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$workspace.id&quot;</span><span class=w> </span><span class=c1># PPE workspace ID (dynamic)</span>
</span><span id=__span-7-27><a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$workspace.id&quot;</span><span class=w> </span><span class=c1># PROD workspace ID (dynamic)</span>
</span><span id=__span-7-28><a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a><span class=w>      </span><span class=nt>is_regex</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-7-29><a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a><span class=w>      </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class=c1># filter on notebook files with these paths</span>
</span><span id=__span-7-30><a id=__codelineno-7-30 name=__codelineno-7-30 href=#__codelineno-7-30></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;/Hello</span><span class=nv> </span><span class=s>World.Notebook/notebook-content.py&quot;</span>
</span><span id=__span-7-31><a id=__codelineno-7-31 name=__codelineno-7-31 href=#__codelineno-7-31></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;\\Goodbye</span><span class=nv> </span><span class=s>World.Notebook\\notebook-content.py&quot;</span>
</span><span id=__span-7-32><a id=__codelineno-7-32 name=__codelineno-7-32 href=#__codelineno-7-32></a>
</span><span id=__span-7-33><a id=__codelineno-7-33 name=__codelineno-7-33 href=#__codelineno-7-33></a><span class=nt>key_value_replace</span><span class=p>:</span>
</span><span id=__span-7-34><a id=__codelineno-7-34 name=__codelineno-7-34 href=#__codelineno-7-34></a><span class=w>    </span><span class=c1># SQL Server Connection to be replaced</span>
</span><span id=__span-7-35><a id=__codelineno-7-35 name=__codelineno-7-35 href=#__codelineno-7-35></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$.properties.activities[?(@.name==&quot;Load_Intake&quot;)].typeProperties.source.datasetSettings.externalReferences.connection</span>
</span><span id=__span-7-36><a id=__codelineno-7-36 name=__codelineno-7-36 href=#__codelineno-7-36></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-7-37><a id=__codelineno-7-37 name=__codelineno-7-37 href=#__codelineno-7-37></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;6c517159-d27a-41d5-b71e-ca1ecff6542b&quot;</span><span class=w> </span><span class=c1># PPE SQL Server Connection</span>
</span><span id=__span-7-38><a id=__codelineno-7-38 name=__codelineno-7-38 href=#__codelineno-7-38></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;6c517159-d27a-41d5-b71e-ca1ecff6542b&quot;</span><span class=w> </span><span class=c1># PROD SQL Server Connection</span>
</span><span id=__span-7-39><a id=__codelineno-7-39 name=__codelineno-7-39 href=#__codelineno-7-39></a><span class=w>      </span><span class=nt>item_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;DataPipeline&quot;</span><span class=w> </span><span class=c1># filter on data pipeline files</span>
</span><span id=__span-7-40><a id=__codelineno-7-40 name=__codelineno-7-40 href=#__codelineno-7-40></a>
</span><span id=__span-7-41><a id=__codelineno-7-41 name=__codelineno-7-41 href=#__codelineno-7-41></a><span class=nt>spark_pool</span><span class=p>:</span>
</span><span id=__span-7-42><a id=__codelineno-7-42 name=__codelineno-7-42 href=#__codelineno-7-42></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>instance_pool_id</span><span class=p>:</span><span class=w> </span><span class=s>&quot;72c68dbc-0775-4d59-909d-a47896f4573b&quot;</span><span class=w> </span><span class=c1># spark_pool_instance_id to be replaced</span>
</span><span id=__span-7-43><a id=__codelineno-7-43 name=__codelineno-7-43 href=#__codelineno-7-43></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-7-44><a id=__codelineno-7-44 name=__codelineno-7-44 href=#__codelineno-7-44></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span>
</span><span id=__span-7-45><a id=__codelineno-7-45 name=__codelineno-7-45 href=#__codelineno-7-45></a><span class=w>              </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Capacity&quot;</span><span class=w> </span><span class=c1># target spark pool type, only supports Capacity or Workspace</span>
</span><span id=__span-7-46><a id=__codelineno-7-46 name=__codelineno-7-46 href=#__codelineno-7-46></a><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;CapacityPool_Medium&quot;</span><span class=w> </span><span class=c1># target spark pool name</span>
</span><span id=__span-7-47><a id=__codelineno-7-47 name=__codelineno-7-47 href=#__codelineno-7-47></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span>
</span><span id=__span-7-48><a id=__codelineno-7-48 name=__codelineno-7-48 href=#__codelineno-7-48></a><span class=w>              </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Capacity&quot;</span><span class=w> </span><span class=c1># target spark pool type, only supports Capacity or Workspace</span>
</span><span id=__span-7-49><a id=__codelineno-7-49 name=__codelineno-7-49 href=#__codelineno-7-49></a><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;CapacityPool_Large&quot;</span><span class=w> </span><span class=c1># target spark pool name</span>
</span><span id=__span-7-50><a id=__codelineno-7-50 name=__codelineno-7-50 href=#__codelineno-7-50></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;World&quot;</span><span class=w> </span><span class=c1># filter on environment file for environment named &quot;World&quot;</span>
</span><span id=__span-7-51><a id=__codelineno-7-51 name=__codelineno-7-51 href=#__codelineno-7-51></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>instance_pool_id</span><span class=p>:</span><span class=w> </span><span class=s>&quot;e7b8f1c4-4a6e-4b8b-9b2e-8f1e5d6a9c3d&quot;</span><span class=w> </span><span class=c1># spark_pool_instance_id to be replaced</span>
</span><span id=__span-7-52><a id=__codelineno-7-52 name=__codelineno-7-52 href=#__codelineno-7-52></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-7-53><a id=__codelineno-7-53 name=__codelineno-7-53 href=#__codelineno-7-53></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span>
</span><span id=__span-7-54><a id=__codelineno-7-54 name=__codelineno-7-54 href=#__codelineno-7-54></a><span class=w>              </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Workspace&quot;</span><span class=w> </span><span class=c1># target spark pool type, only supports Capacity or Workspace</span>
</span><span id=__span-7-55><a id=__codelineno-7-55 name=__codelineno-7-55 href=#__codelineno-7-55></a><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;WorkspacePool_Medium&quot;</span><span class=w> </span><span class=c1># target spark pool name</span>
</span><span id=__span-7-56><a id=__codelineno-7-56 name=__codelineno-7-56 href=#__codelineno-7-56></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;World_1&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;World_2&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;World_3&quot;</span><span class="p p-Indicator">]</span><span class=w> </span><span class=c1># filter on environment files for environments with these names</span>
</span></code></pre></div> <h2 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h2> <h3 id=notebooks>Notebooks<a class=headerlink href=#notebooks title="Permanent link">&para;</a></h3> <p>A Notebook is attached to a Lakehouse which resides in different workspaces. The Workspace and Lakehouse GUIDs in the Notebook need to be updated to ensure the Notebook points to the correct Lakehouse once deployed.</p> <p>In the <code>notebook-content.py</code> file, the default_lakehouse <code>123e4567-e89b-12d3-a456-426614174000</code>, and default_lakehouse_workspace_id <code>8f5c0cec-a8ea-48cd-9da4-871dc2642f4c</code> must be replaced with the corresponding GUIDs of the Lakehouse in the target environment (PPE/PROD/etc).</p> <p>This replacement is managed by the <code>find_replace</code> input in the <code>parameter.yml</code> file where fabric-cicd finds every instance of the string within the <em>specified</em> repository files and replaces it with the string for the deployed environment.</p> <p><span class=md-h4-nonanchor>parameter.yml file</span></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nt>find_replace</span><span class=p>:</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;123e4567-e89b-12d3-a456-426614174000&quot;</span><span class=w> </span><span class=c1># lakehouse GUID to be replaced</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;f47ac10b-58cc-4372-a567-0e02b2c3d479&quot;</span><span class=w> </span><span class=c1># PPE lakehouse GUID</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;9b2e5f4c-8d3a-4f1b-9c3e-2d5b6e4a7f8c&quot;</span><span class=w> </span><span class=c1># PROD lakehouse GUID</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>      </span><span class=nt>item_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Notebook&quot;</span><span class=w> </span><span class=c1># filter on notebook files</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;Hello</span><span class=nv> </span><span class=s>World&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;Goodbye</span><span class=nv> </span><span class=s>World&quot;</span><span class="p p-Indicator">]</span><span class=w> </span><span class=c1># filter on specific notebook files</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;8f5c0cec-a8ea-48cd-9da4-871dc2642f4c&quot;</span><span class=w> </span><span class=c1># workspace ID to be replaced</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;d4e5f6a7-b8c9-4d1e-9f2a-3b4c5d6e7f8a&quot;</span><span class=w> </span><span class=c1># PPE workspace ID</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;a1b2c3d4-e5f6-7a8b-9c0d-1e2f3a4b5c6d&quot;</span><span class=w> </span><span class=c1># PROD workspace ID</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>      </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class=c1># filter on notebook files with these paths</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;/Hello</span><span class=nv> </span><span class=s>World.Notebook/notebook-content.py&quot;</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;\\Goodbye</span><span class=nv> </span><span class=s>World.Notebook\\notebook-content.py&quot;</span>
</span></code></pre></div> <p><span class=md-h4-nonanchor>notebook-content.py file</span></p> <div class="language-python highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1># Fabric notebook source</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=c1># METADATA ********************</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=c1># META {</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=c1># META   &quot;kernel_info&quot;: {</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=c1># META     &quot;name&quot;: &quot;synapse_pyspark&quot;</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=c1># META   },</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=c1># META   &quot;dependencies&quot;: {</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=c1># META     &quot;lakehouse&quot;: {</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=c1># META       &quot;default_lakehouse&quot;: &quot;123e4567-e89b-12d3-a456-426614174000&quot;,</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=c1># META       &quot;default_lakehouse_name&quot;: &quot;Example_LH&quot;,</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=c1># META       &quot;default_lakehouse_workspace_id&quot;: &quot;8f5c0cec-a8ea-48cd-9da4-871dc2642f4c&quot;</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=c1># META     },</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=c1># META     &quot;environment&quot;: {</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=c1># META       &quot;environmentId&quot;: &quot;a277ea4a-e87f-8537-4ce0-39db11d4aade&quot;,</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=c1># META       &quot;workspaceId&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=c1># META     }</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=c1># META   }</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=c1># META }</span>
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a>
</span><span id=__span-9-22><a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a><span class=c1># CELL ********************</span>
</span><span id=__span-9-23><a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a>
</span><span id=__span-9-24><a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=n>df</span> <span class=o>=</span> <span class=n>spark</span><span class=o>.</span><span class=n>sql</span><span class=p>(</span><span class=s2>&quot;SELECT * FROM Example_LH.Table1 LIMIT 1000&quot;</span><span class=p>)</span>
</span><span id=__span-9-25><a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a><span class=n>display</span><span class=p>(</span><span class=n>df</span><span class=p>)</span>
</span><span id=__span-9-26><a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a>
</span><span id=__span-9-27><a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a><span class=c1># METADATA ********************</span>
</span><span id=__span-9-28><a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a>
</span><span id=__span-9-29><a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a><span class=c1># META {</span>
</span><span id=__span-9-30><a id=__codelineno-9-30 name=__codelineno-9-30 href=#__codelineno-9-30></a><span class=c1># META   &quot;language&quot;: &quot;python&quot;,</span>
</span><span id=__span-9-31><a id=__codelineno-9-31 name=__codelineno-9-31 href=#__codelineno-9-31></a><span class=c1># META   &quot;language_group&quot;: &quot;synapse_pyspark&quot;</span>
</span><span id=__span-9-32><a id=__codelineno-9-32 name=__codelineno-9-32 href=#__codelineno-9-32></a><span class=c1># META }</span>
</span></code></pre></div> <p><span class=md-h4-nonanchor>Alternate approach</span></p> <p>This approach uses a regex pattern and dynamic variables to manage replacement. In this <code>find_replace</code> input in the <code>parameter.yml</code> file, the <code>is_regex</code> field is set to <code>"true"</code>, enabling fabric-cicd to find a string value within the <em>specified</em> repository files that matches the provided regex pattern.</p> <p>The regex pattern must include a capture group, defined using <code>()</code>, and the <code>find_value</code> must always match <strong>group 1</strong>. The value captured in this group will be replaced with the string dynamically derived from the variable for the deployed environment.</p> <p>This approach is especially useful when replacing values that are not known until deployment time, such as item ids.</p> <p><span class=md-h4-nonanchor>parameter.yml file</span></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>find_replace</span><span class=p>:</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=c1># lakehouse GUID matching group 1 of regex pattern to be replaced</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">\#\s*META\s+&quot;default_lakehouse&quot;:\s*&quot;([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})&quot;</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Example_LH.id&quot;</span><span class=w> </span><span class=c1># PPE lakehouse GUID (dynamic)</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Example_LH.id&quot;</span><span class=w> </span><span class=c1># PROD lakehouse GUID (dynamic)</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>      </span><span class=nt>is_regex</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>      </span><span class=nt>item_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Notebook&quot;</span><span class=w> </span><span class=c1># filter on notebook files</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;Hello</span><span class=nv> </span><span class=s>World&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;Goodbye</span><span class=nv> </span><span class=s>World&quot;</span><span class="p p-Indicator">]</span><span class=w> </span><span class=c1># filter on specific notebook files</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>    </span><span class=c1># workspace ID matching group 1 of regex pattern to be replaced</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">\#\s*META\s+&quot;default_lakehouse_workspace_id&quot;:\s*&quot;([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})&quot;</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$workspace.id&quot;</span><span class=w> </span><span class=c1># PPE workspace ID (dynamic)</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$workspace.id&quot;</span><span class=w> </span><span class=c1># PROD workspace ID (dynamic)</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>      </span><span class=nt>is_regex</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>      </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class=c1># filter on notebook files with these paths</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;/Hello</span><span class=nv> </span><span class=s>World.Notebook/notebook-content.py&quot;</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;\\Goodbye</span><span class=nv> </span><span class=s>World.Notebook\\notebook-content.py&quot;</span>
</span></code></pre></div> <h3 id=data-pipelines>Data Pipelines<a class=headerlink href=#data-pipelines title="Permanent link">&para;</a></h3> <p>A Data Pipeline is attached to data sources via the Connection Id. Connections are not deployed with fabric-cicd and therefore need to be parameterized.</p> <p>In the <code>pipeline-content.json</code> file, the SQL Server Connection Id <code>c517e095-ed87-4665-95fa-8cdb1e751fba</code>, must be replaced with the corresponding GUIDs of the SQL Server in the target environment (PPE/PROD/etc).</p> <p>This replacement is managed by the <code>find_key</code> input in the <code>parameter.yml</code> file where fabric-cicd finds every instance of the key within the <em>specified</em> repository files and replaces it with the string for the deployed environment.</p> <p><span class=md-h4-nonanchor>parameter.yml file</span></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>find_replace</span><span class=p>:</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$.properties.activities[?(@.name==&quot;Copy Data&quot;)].typeProperties.source.datasetSettings.externalReferences.connection</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;f47ac10b-58cc-4372-a567-0e02b2c3d479&quot;</span><span class=w> </span><span class=c1># PPE SQL Connection GUID</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;9b2e5f4c-8d3a-4f1b-9c3e-2d5b6e4a7f8c&quot;</span><span class=w> </span><span class=c1># PROD SQL Connection GUID</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>      </span><span class=nt>item_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Data</span><span class=nv> </span><span class=s>Pipeline&quot;</span><span class=w> </span><span class=c1># filter on Data Pipelines files</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Example</span><span class=nv> </span><span class=s>Pipeline&quot;</span><span class=w> </span><span class=c1># filter on specific Data Pipelines files</span>
</span></code></pre></div> <p><span class=md-h4-nonanchor>pipeline-content.json file</span></p> <div class="language-json highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=p>{</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>    </span><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>        </span><span class=nt>&quot;activities&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>            </span><span class=p>{</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>                </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Copy Data&quot;</span><span class=p>,</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>                </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Copy&quot;</span><span class=p>,</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>                </span><span class=nt>&quot;dependsOn&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>                </span><span class=nt>&quot;policy&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>                    </span><span class=nt>&quot;timeout&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.12:00:00&quot;</span><span class=p>,</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=w>                    </span><span class=nt>&quot;retry&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>                    </span><span class=nt>&quot;retryIntervalInSeconds&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>30</span><span class=p>,</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=w>                    </span><span class=nt>&quot;secureOutput&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=w>                    </span><span class=nt>&quot;secureInput&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>                </span><span class=p>},</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>                </span><span class=nt>&quot;typeProperties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=w>                    </span><span class=nt>&quot;source&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=w>                        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;AzureSqlSource&quot;</span><span class=p>,</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=w>                        </span><span class=nt>&quot;queryTimeout&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;02:00:00&quot;</span><span class=p>,</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a><span class=w>                        </span><span class=nt>&quot;partitionOption&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;None&quot;</span><span class=p>,</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a><span class=w>                        </span><span class=nt>&quot;datasetSettings&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-21><a id=__codelineno-12-21 name=__codelineno-12-21 href=#__codelineno-12-21></a><span class=w>                            </span><span class=nt>&quot;annotations&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-12-22><a id=__codelineno-12-22 name=__codelineno-12-22 href=#__codelineno-12-22></a><span class=w>                            </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;AzureSqlTable&quot;</span><span class=p>,</span>
</span><span id=__span-12-23><a id=__codelineno-12-23 name=__codelineno-12-23 href=#__codelineno-12-23></a><span class=w>                            </span><span class=nt>&quot;schema&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-12-24><a id=__codelineno-12-24 name=__codelineno-12-24 href=#__codelineno-12-24></a><span class=w>                            </span><span class=nt>&quot;typeProperties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-25><a id=__codelineno-12-25 name=__codelineno-12-25 href=#__codelineno-12-25></a><span class=w>                                </span><span class=nt>&quot;schema&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Dataprod&quot;</span><span class=p>,</span>
</span><span id=__span-12-26><a id=__codelineno-12-26 name=__codelineno-12-26 href=#__codelineno-12-26></a><span class=w>                                </span><span class=nt>&quot;table&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;DIM_Calendar&quot;</span><span class=p>,</span>
</span><span id=__span-12-27><a id=__codelineno-12-27 name=__codelineno-12-27 href=#__codelineno-12-27></a><span class=w>                                </span><span class=nt>&quot;database&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;unified&quot;</span>
</span><span id=__span-12-28><a id=__codelineno-12-28 name=__codelineno-12-28 href=#__codelineno-12-28></a><span class=w>                            </span><span class=p>},</span>
</span><span id=__span-12-29><a id=__codelineno-12-29 name=__codelineno-12-29 href=#__codelineno-12-29></a><span class=w>                            </span><span class=nt>&quot;externalReferences&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-30><a id=__codelineno-12-30 name=__codelineno-12-30 href=#__codelineno-12-30></a><span class=w>                                </span><span class=nt>&quot;connection&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;c517e095-ed87-4665-95fa-8cdb1e751fba&quot;</span>
</span><span id=__span-12-31><a id=__codelineno-12-31 name=__codelineno-12-31 href=#__codelineno-12-31></a><span class=w>                            </span><span class=p>}</span>
</span><span id=__span-12-32><a id=__codelineno-12-32 name=__codelineno-12-32 href=#__codelineno-12-32></a><span class=w>                        </span><span class=p>}</span>
</span><span id=__span-12-33><a id=__codelineno-12-33 name=__codelineno-12-33 href=#__codelineno-12-33></a><span class=w>                    </span><span class=p>},</span>
</span><span id=__span-12-34><a id=__codelineno-12-34 name=__codelineno-12-34 href=#__codelineno-12-34></a><span class=w>                    </span><span class=nt>&quot;sink&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-35><a id=__codelineno-12-35 name=__codelineno-12-35 href=#__codelineno-12-35></a><span class=w>                        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;LakehouseTableSink&quot;</span><span class=p>,</span>
</span><span id=__span-12-36><a id=__codelineno-12-36 name=__codelineno-12-36 href=#__codelineno-12-36></a><span class=w>                        </span><span class=nt>&quot;tableActionOption&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Append&quot;</span><span class=p>,</span>
</span><span id=__span-12-37><a id=__codelineno-12-37 name=__codelineno-12-37 href=#__codelineno-12-37></a><span class=w>                        </span><span class=nt>&quot;datasetSettings&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-38><a id=__codelineno-12-38 name=__codelineno-12-38 href=#__codelineno-12-38></a><span class=w>                            </span><span class=nt>&quot;annotations&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-12-39><a id=__codelineno-12-39 name=__codelineno-12-39 href=#__codelineno-12-39></a><span class=w>                            </span><span class=nt>&quot;linkedService&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-40><a id=__codelineno-12-40 name=__codelineno-12-40 href=#__codelineno-12-40></a><span class=w>                                </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Unified&quot;</span><span class=p>,</span>
</span><span id=__span-12-41><a id=__codelineno-12-41 name=__codelineno-12-41 href=#__codelineno-12-41></a><span class=w>                                </span><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-42><a id=__codelineno-12-42 name=__codelineno-12-42 href=#__codelineno-12-42></a><span class=w>                                    </span><span class=nt>&quot;annotations&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-12-43><a id=__codelineno-12-43 name=__codelineno-12-43 href=#__codelineno-12-43></a><span class=w>                                    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Lakehouse&quot;</span><span class=p>,</span>
</span><span id=__span-12-44><a id=__codelineno-12-44 name=__codelineno-12-44 href=#__codelineno-12-44></a><span class=w>                                    </span><span class=nt>&quot;typeProperties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-45><a id=__codelineno-12-45 name=__codelineno-12-45 href=#__codelineno-12-45></a><span class=w>                                        </span><span class=nt>&quot;workspaceId&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2d2e0ae2-9505-4f0c-ab42-e76cc11fb07d&quot;</span><span class=p>,</span>
</span><span id=__span-12-46><a id=__codelineno-12-46 name=__codelineno-12-46 href=#__codelineno-12-46></a><span class=w>                                        </span><span class=nt>&quot;artifactId&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;31dd665e-95f3-4575-9f46-70ea5903d89b&quot;</span><span class=p>,</span>
</span><span id=__span-12-47><a id=__codelineno-12-47 name=__codelineno-12-47 href=#__codelineno-12-47></a><span class=w>                                        </span><span class=nt>&quot;rootFolder&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Tables&quot;</span>
</span><span id=__span-12-48><a id=__codelineno-12-48 name=__codelineno-12-48 href=#__codelineno-12-48></a><span class=w>                                    </span><span class=p>}</span>
</span><span id=__span-12-49><a id=__codelineno-12-49 name=__codelineno-12-49 href=#__codelineno-12-49></a><span class=w>                                </span><span class=p>}</span>
</span><span id=__span-12-50><a id=__codelineno-12-50 name=__codelineno-12-50 href=#__codelineno-12-50></a><span class=w>                            </span><span class=p>},</span>
</span><span id=__span-12-51><a id=__codelineno-12-51 name=__codelineno-12-51 href=#__codelineno-12-51></a><span class=w>                            </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;LakehouseTable&quot;</span><span class=p>,</span>
</span><span id=__span-12-52><a id=__codelineno-12-52 name=__codelineno-12-52 href=#__codelineno-12-52></a><span class=w>                            </span><span class=nt>&quot;schema&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-12-53><a id=__codelineno-12-53 name=__codelineno-12-53 href=#__codelineno-12-53></a><span class=w>                            </span><span class=nt>&quot;typeProperties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-54><a id=__codelineno-12-54 name=__codelineno-12-54 href=#__codelineno-12-54></a><span class=w>                                </span><span class=nt>&quot;schema&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Dataprod&quot;</span><span class=p>,</span>
</span><span id=__span-12-55><a id=__codelineno-12-55 name=__codelineno-12-55 href=#__codelineno-12-55></a><span class=w>                                </span><span class=nt>&quot;table&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;DIM_Calendar&quot;</span>
</span><span id=__span-12-56><a id=__codelineno-12-56 name=__codelineno-12-56 href=#__codelineno-12-56></a><span class=w>                            </span><span class=p>}</span>
</span><span id=__span-12-57><a id=__codelineno-12-57 name=__codelineno-12-57 href=#__codelineno-12-57></a><span class=w>                        </span><span class=p>}</span>
</span><span id=__span-12-58><a id=__codelineno-12-58 name=__codelineno-12-58 href=#__codelineno-12-58></a><span class=w>                    </span><span class=p>},</span>
</span><span id=__span-12-59><a id=__codelineno-12-59 name=__codelineno-12-59 href=#__codelineno-12-59></a><span class=w>                    </span><span class=nt>&quot;enableStaging&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-12-60><a id=__codelineno-12-60 name=__codelineno-12-60 href=#__codelineno-12-60></a><span class=w>                    </span><span class=nt>&quot;translator&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-61><a id=__codelineno-12-61 name=__codelineno-12-61 href=#__codelineno-12-61></a><span class=w>                        </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;TabularTranslator&quot;</span><span class=p>,</span>
</span><span id=__span-12-62><a id=__codelineno-12-62 name=__codelineno-12-62 href=#__codelineno-12-62></a><span class=w>                        </span><span class=nt>&quot;typeConversion&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-12-63><a id=__codelineno-12-63 name=__codelineno-12-63 href=#__codelineno-12-63></a><span class=w>                        </span><span class=nt>&quot;typeConversionSettings&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-64><a id=__codelineno-12-64 name=__codelineno-12-64 href=#__codelineno-12-64></a><span class=w>                            </span><span class=nt>&quot;allowDataTruncation&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-12-65><a id=__codelineno-12-65 name=__codelineno-12-65 href=#__codelineno-12-65></a><span class=w>                            </span><span class=nt>&quot;treatBooleanAsNumber&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-12-66><a id=__codelineno-12-66 name=__codelineno-12-66 href=#__codelineno-12-66></a><span class=w>                        </span><span class=p>}</span>
</span><span id=__span-12-67><a id=__codelineno-12-67 name=__codelineno-12-67 href=#__codelineno-12-67></a><span class=w>                    </span><span class=p>}</span>
</span><span id=__span-12-68><a id=__codelineno-12-68 name=__codelineno-12-68 href=#__codelineno-12-68></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-12-69><a id=__codelineno-12-69 name=__codelineno-12-69 href=#__codelineno-12-69></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-12-70><a id=__codelineno-12-70 name=__codelineno-12-70 href=#__codelineno-12-70></a><span class=w>        </span><span class=p>]</span>
</span><span id=__span-12-71><a id=__codelineno-12-71 name=__codelineno-12-71 href=#__codelineno-12-71></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-72><a id=__codelineno-12-72 name=__codelineno-12-72 href=#__codelineno-12-72></a><span class=p>}</span>
</span></code></pre></div> <h3 id=environments>Environments<a class=headerlink href=#environments title="Permanent link">&para;</a></h3> <p>An Environment is attached to a Capacity level Custom Pool. Source control for Environments does not output the right fields necessary to deploy, so the Spark Pool needs to be parameterized.</p> <p><strong>Note:</strong> Defining different names per environment is now supported in the <code>parameter.yml</code> file.</p> <p>In the <code>Sparkcompute.yaml</code> file, the referenced instance_pool_id <code>72c68dbc-0775-4d59-909d-a47896f4573b</code> points to a capacity custom pool named <code>CapacityPool_Large</code> of pool type <code>Capacity</code> for the <code>PROD</code> environment.</p> <p>This replacement is managed by the <code>spark_pool</code> input in the <code>parameter.yml</code> file where fabric-cicd finds every instance of the <code>instance_pool_id</code> and replaces it with the pool type and pool name for the <em>specified</em> environment file.</p> <p><span class=md-h4-nonanchor>parameter.yml file</span></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=nt>spark_pool</span><span class=p>:</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>instance_pool_id</span><span class=p>:</span><span class=w> </span><span class=s>&quot;72c68dbc-0775-4d59-909d-a47896f4573b&quot;</span><span class=w> </span><span class=c1># spark_pool_instance_id to be replaced</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>              </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Capacity&quot;</span><span class=w> </span><span class=c1># target spark pool type, only supports Capacity or Workspace</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;CapacityPool_Medium&quot;</span><span class=w> </span><span class=c1># target spark pool name</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>              </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Capacity&quot;</span><span class=w> </span><span class=c1># target spark pool type, only supports Capacity or Workspace</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;CapacityPool_Large&quot;</span><span class=w> </span><span class=c1># target spark pool name</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>      </span><span class=nt>item_name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;World&quot;</span><span class=w> </span><span class=c1># filter on environment file for environment named &quot;World&quot;</span>
</span></code></pre></div> <p><span class=md-h4-nonanchor>Sparkcompute.yml</span></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=nt>enable_native_execution_engine</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=nt>instance_pool_id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">72c68dbc-0775-4d59-909d-a47896f4573b</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=nt>driver_cores</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=nt>driver_memory</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">112g</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=nt>executor_cores</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">16</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=nt>executor_memory</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">112g</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=nt>dynamic_executor_allocation</span><span class=p>:</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>    </span><span class=nt>min_executors</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">31</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>    </span><span class=nt>max_executors</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">31</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=nt>runtime_version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1.3</span>
</span></code></pre></div> <h3 id=dataflows>Dataflows<a class=headerlink href=#dataflows title="Permanent link">&para;</a></h3> <p>Dataflows connect to source/destination items, such as a Lakehouse through:</p> <ol> <li>Connection Id in the <code>queryMetadata.json</code> file.</li> <li>Workspace and item Ids in the <code>mashup.pq</code> file.</li> </ol> <p>Connections are not deployed with fabric-cicd and therefore need to be parameterized. Referenced items in the <code>mashup.pq</code> file that exist in the same workspace as the Dataflow need to be parameterized to ensure proper deployment across environments.</p> <p><span class=md-h4-nonanchor>queryMetadata.json file</span></p> <div class="language-json highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=p>{</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=nt>&quot;formatVersion&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;202502&quot;</span><span class=p>,</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>    </span><span class=nt>&quot;computeEngineSettings&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Sample Dataflow&quot;</span><span class=p>,</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span><span class=nt>&quot;queryGroups&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=nt>&quot;documentLocale&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;en-US&quot;</span><span class=p>,</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>    </span><span class=nt>&quot;queriesMetadata&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>        </span><span class=nt>&quot;Table&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>            </span><span class=nt>&quot;queryId&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;ba67667b-14c0-4536-a92d-feafc73baa4b&quot;</span><span class=p>,</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=w>            </span><span class=nt>&quot;queryName&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Table&quot;</span><span class=p>,</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>            </span><span class=nt>&quot;loadEnabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a><span class=w>        </span><span class=nt>&quot;Table_DataDestination&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=w>            </span><span class=nt>&quot;queryId&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;a157a378-b510-4d95-bb82-5a7c80df8b4c&quot;</span><span class=p>,</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a><span class=w>            </span><span class=nt>&quot;queryName&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Table_DataDestination&quot;</span><span class=p>,</span>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a><span class=w>            </span><span class=nt>&quot;isHidden&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a><span class=w>            </span><span class=nt>&quot;loadEnabled&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a><span class=w>    </span><span class=nt>&quot;connections&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a><span class=w>        </span><span class=p>{</span>
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a><span class=w>            </span><span class=nt>&quot;path&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Lakehouse&quot;</span><span class=p>,</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a><span class=w>            </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Lakehouse&quot;</span><span class=p>,</span>
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24 href=#__codelineno-15-24></a><span class=w>            </span><span class=nt>&quot;connectionId&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;{\&quot;ClusterId\&quot;:\&quot;8e4f92a7-3c18-49d5-b6d0-7f2e591ca4e8\&quot;,\&quot;DatasourceId\&quot;:\&quot;d12c5f7b-90a3-47e6-8d2c-3fb59e01d47a\&quot;}&quot;</span>
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25 href=#__codelineno-15-25></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26 href=#__codelineno-15-26></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-15-27><a id=__codelineno-15-27 name=__codelineno-15-27 href=#__codelineno-15-27></a><span class=p>}</span>
</span></code></pre></div> <p>For example, in the <code>mashup.pq</code> file, the following GUIDs need to be replaced:</p> <ul> <li>The workspaceId <code>e6a8c59f-4b27-48d1-ae03-7f92b1c6458d</code> with the target workspace Id.</li> <li>The lakehouseId <code>3d72f90e-61b5-42a8-9c7e-b085d4e31fa2</code> with the corresponding Id of the Lakehouse in the target environment (PPE/PROD/etc).</li> </ul> <p>These replacements are managed using a regex pattern as input for the <code>find_value</code> in the <code>parameter.yml</code> file, which finds the matching value in the <em>specified</em> repository files and replaces it with the dynamically retrieved workspace or item Id of the target environment.</p> <p><span class=md-h4-nonanchor>mashup.pq file</span></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>[StagingDefinition = [Kind = &quot;FastCopy&quot;]]
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>section Section1;
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>[DataDestinations = {[Definition = [Kind = &quot;Reference&quot;, QueryName = &quot;Table_DataDestination&quot;, IsNewTarget = true], Settings = [Kind = &quot;Automatic&quot;, TypeSettings = [Kind = &quot;Table&quot;]]]}]
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>shared Table = let
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>  Source = Table.FromRows(Json.Document(Binary.Decompress(Binary.FromText(&quot;i45WckksSUzLyS9X0lEyBGKP1JycfKVYHYhEQGZBak5mXipQwgiIw/OLclLAkn75JalJ+fnZQEFjmC4FhHRwam5iXklmsm9+SmoOUN4EiMFsBVTzoRabArGLG0x/LAA=&quot;, BinaryEncoding.Base64), Compression.Deflate)), let _t = ((type nullable text) meta [Serialized.Text = true]) in type table [Item = _t, Id = _t, Name = _t]),
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>  #&quot;Changed column type&quot; = Table.TransformColumnTypes(Source, {{&quot;Item&quot;, type text}, {&quot;Id&quot;, Int64.Type}, {&quot;Name&quot;, type text}}),
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>  #&quot;Added custom&quot; = Table.TransformColumnTypes(Table.AddColumn(#&quot;Changed column type&quot;, &quot;IsDataflow&quot;, each if [Item] = &quot;Dataflow&quot; then true else false), {{&quot;IsDataflow&quot;, type logical}}),
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>  #&quot;Added custom 1&quot; = Table.TransformColumnTypes(Table.AddColumn(#&quot;Added custom&quot;, &quot;ContainsHello&quot;, each if Text.Contains([Name], &quot;Hello&quot;) then 1 else 0), {{&quot;ContainsHello&quot;, Int64.Type}})
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>in
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>  #&quot;Added custom 1&quot;;
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a>shared Table_DataDestination = let
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>  Pattern = Lakehouse.Contents([CreateNavigationProperties = false, EnableFolding = false]),
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>  Navigation_1 = Pattern{[workspaceId = &quot;e6a8c59f-4b27-48d1-ae03-7f92b1c6458d&quot;]}[Data],
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>  Navigation_2 = Navigation_1{[lakehouseId = &quot;3d72f90e-61b5-42a8-9c7e-b085d4e31fa2&quot;]}[Data],
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>  TableNavigation = Navigation_2{[Id = &quot;Items&quot;, ItemKind = &quot;Table&quot;]}?[Data]?
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a>in
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a>  TableNavigation;
</span></code></pre></div> <p><span class=md-h4-nonanchor>parameter.yml file</span></p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nt>find_replace</span><span class=p>:</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>    </span><span class=c1># Lakehouse workspace ID regex - matches the workspaceId GUID</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Navigation_1\s*=\s*Pattern\{\[workspaceId\s*=\s*&quot;([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})&quot;\]\}</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$workspace.id&quot;</span><span class=w> </span><span class=c1># PPE workspace ID (dynamic)</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$workspace.id&quot;</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>      </span><span class=nt>is_regex</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span><span class=w> </span><span class=c1># Activate find_value regex matching</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=w>      </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/Sample</span><span class=nv> </span><span class=s>Dataflow.Dataflow/mashup.pq&quot;</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=w>    </span><span class=c1># Lakehouse ID regex - matches the lakehouseId GUID</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>find_value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Navigation_2\s*=\s*Navigation_1\{\[lakehouseId\s*=\s*&quot;([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})&quot;\]\}</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=w>      </span><span class=nt>replace_value</span><span class=p>:</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=w>          </span><span class=nt>PPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Sample_LH.id&quot;</span><span class=w> </span><span class=c1># Sample_LH Lakehouse ID in PPE (dynamic)</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=w>          </span><span class=nt>PROD</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$items.Lakehouse.Sample_LH.id&quot;</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=w>      </span><span class=nt>is_regex</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span><span class=w> </span><span class=c1># Activate find_value regex matching</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=w>      </span><span class=nt>file_path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/Sample</span><span class=nv> </span><span class=s>Dataflow.Dataflow/mashup.pq&quot;</span>
</span></code></pre></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright © Microsoft Corporation </div> </div> <div class=md-social> <a href=https://github.com/microsoft/fabric-cicd target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.copy", "content.tooltips", "navigation.expand", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight", "search.suggest", "toc.follow", "toc.integrate", "announce.dismiss"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.f1b6f286.min.js></script> </body> </html>